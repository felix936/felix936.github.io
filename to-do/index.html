<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>To-Do</title>
  <style>
    body {
        font-family: Arial, Helvetica, sans-serif;
        box-sizing: border-box;
        width: 100%;
        margin: 0;
        padding: 1rem;
        background-color: rgb(50, 50, 50);
    }

    h1 {
        display: flex;
        justify-content: center;
        color: white;
    }

    .to-do-grid, .to-do-input-grid {
        display: grid;
        grid-template-columns: 45% 35% 20%;
        column-gap: 0.35rem;
        row-gap: 0.35rem;
        font-size: 1.2rem;
        justify-content: center;
    }
    .to-do-input-grid {
        margin-bottom: 1%;
    }
    .to-do-grid div{
        color: white;
        background-color: rgb(100, 100, 100);
        border-radius: 0.2rem;
        padding: 0.4rem;
    }
    .to-do-input, .due-date-input {
        font-size: 1.2rem;
        padding: 0.2rem;
        border-width: 0.15rem;
        border-style: none;
        border-radius: 0.2rem;
        font-family: Arial, Helvetica, sans-serif;
        color: darkslategrey;
        background-color: rgb(255, 255, 255);
    }
    .due-date-input {
        width: calc(100% - 0.4rem);
        cursor: pointer;
    }

    .input-date-div{
        width: calc(100% - 0.4rem);
        background-color: white;
    }

    button {
        font-size: 1.2rem;
        padding: 0.2rem;
        border: none;
        border-radius: 0.2rem;
        color: black;
        cursor: pointer;
    }
    .add {
        background-color: rgb(170, 255, 0);
    }
    .remove {
        background-color: red;
    }
    @media all and (min-width: 750px) {
        .to-do-grid, .to-do-input-grid {
        grid-template-columns: 30% 25% 10%;}
    }
  </style>
</head>
<body>
    <h1>To-Do List</h1>
    <div class="to-do-input-grid">
        <input type="text" placeholder="To-Do" class="to-do-input" onkeydown="if (event.keyCode === 13) {addToDo()}">
        <div class="input-date-div"><input type="date" class="due-date-input"  onkeydown="if (event.keyCode === 13) {addToDo()}"></div>
        <button onclick="addToDo()" class="add">Add</button></div>
    <section class="to-do-list-elements to-do-grid"></section>
    <script>
    const toDoList = JSON.parse(localStorage.getItem('toDoList')) || [];
    document.querySelector(".due-date-input").valueAsDate = new Date();

    renderToDo();

    function renderToDo() {
        let htmlCode = '';
        for (let i = 0; i < toDoList.length; i++) {
            const toDoName = toDoList[i].name;
            let toDoDate = toDoList[i].dueDate;
            const options = {year: 'numeric', month: '2-digit', day: '2-digit' };
            const dateFormat = navigator.language;
            toDoDate = new Date(toDoDate).toLocaleDateString(dateFormat, options);
            htmlCode = htmlCode + `<div>${toDoName}</div> <div>${toDoDate}</div><button class="remove" onclick="toDoList.splice(${i}, 1); renderToDo();">Delete</button>`;
        }
        document.querySelector('.to-do-list-elements').innerHTML = htmlCode;
        localStorage.setItem('toDoList', JSON.stringify(toDoList));
    }

    function addToDo () {
        const toDoElement = document.querySelector('.to-do-input');
        const dueDateElement = document.querySelector('.due-date-input');
        if (toDoElement.value != ''){
            toDoList.push({name: toDoElement.value, dueDate: dueDateElement.value});
        }
        toDoElement.value = '';
        renderToDo();
    }
  </script>
</body>
</html>